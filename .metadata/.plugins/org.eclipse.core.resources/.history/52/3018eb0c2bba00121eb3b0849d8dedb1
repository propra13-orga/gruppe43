package com.github.propra13.gruppe43;

import java.awt.image.BufferedImage;
import java.io.*;
import java.util.*;

import javax.imageio.ImageIO;


public class Level {
	//Größe des Levels
	int size_x, size_y;
	//Felder des Levels
	ArrayList<ArrayList<Field>> fields;
	
	
	public Level() {
		fields = new ArrayList<ArrayList<Field>>();
	}
	
	
	//liest ein Level aus einer Textdatei mit dem Pfad "path" ein und speichert dieses in dem Array fields
	public boolean init(String path) {
		String s;
		String imgpath = "wall.jpg";
		BufferedImage img;
		int c = 0;
		int attr = 0;
		
		try {
			Scanner scanner = new Scanner(new File(path));
			do {
				s = scanner.nextLine();
				for (int i = 0; i<s.length(); i++) {
					if (c==0) fields.add(new ArrayList<Field>());
					switch (s.charAt(i)) {
					case Field.WALL:
						imgpath = "wall.jpg";
						attr = 1;
						break;
					case Field.FLOOR:
						imgpath = "floor.jpg";
						attr = 0;
						break;
					default:
						imgpath = "floor.jpg";
						attr = 0;
						break;
	
					}
					img = ImageIO.read(new File(imgpath));
					fields.get(i).add(new Field(img, s.charAt(i)));
					fields.get(i).get(c).setxy(i, c);	
				}
				c++;		

			} while (scanner.hasNextLine());
			scanner.close();
			size_x = fields.size();
			size_y = fields.get(0).size();
			return true;
			
			
			
			
		} catch (FileNotFoundException e) {
			System.out.println("file not found");
			return false;
		} catch (IOException e) {
			System.out.println("cant read shit");
			return false;
		}
		
		

	}
	
	public Field getField(int x, int y) {
		if (x<size_x && y<size_y) {
			return fields.get(x).get(y);
		}
		else {
			return null;
		}
	}
	

}
